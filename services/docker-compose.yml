version: "3.4"
services:

  duckdns:
    image: lscr.io/linuxserver/duckdns:latest
    container_name: duckdns
    environment:
      - PUID=${PUID} # default user id, defined in .env
      - PGID=${PGID} # default group id, defined in .env
      - TZ=${TZ} # timezone, defined in .env
      - SUBDOMAINS=colutti
      - TOKEN=29506d07-fc4b-43bf-9860-23b1d53e97e1
      - LOG_FILE=false #optional
    volumes:
      - ${ROOT}/config/duckdns:/config # config files
    restart: unless-stopped

  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    # For DHCP it is recommended to remove these ports and instead add: network_mode: "host"
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "888:80/tcp"
    environment:
      - TZ=${TZ} # timezone, defined in .env
    # Volumes store your data between container upgrades
    volumes:
      - '${ROOT}/config/etc-pihole:/etc/pihole'
      - '${ROOT}/config/etc-dnsmasq.d:/etc/dnsmasq.d'
      - /var/run/docker.sock:/var/run/docker.sock:ro
    restart: unless-stopped

  portainer:
    image: portainer/portainer-ce:latest
    container_name: portainer
    restart: unless-stopped
    security_opt:
      - no-new-privileges:true
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ${ROOT}/config/portainer:/data
    ports:
      - 9000:9000

  homepage:
    image: ghcr.io/benphelps/homepage:latest
    container_name: homepage
    ports:
      - 3000:3000
    volumes:
      - ${ROOT}/config/homepage:/app/config # Make sure your local config directory is exists
      - /var/run/docker.sock:/var/run/docker.sock # (optional) For docker integrations
    restart: unless-stopped

  searcharr:
    container_name: searcharr
    image: toddrob/searcharr:latest
    volumes:
      - ${ROOT}/config/searcharr/data:/app/data
      - ${ROOT}/config/searcharr/logs:/app/logs
      - ./settings.py:/app/settings.py
    environment:
      - TZ=${TZ}
    restart: unless-stopped
    network_mode: host

  watchtower:
    container_name: watchtower
    image: containrrr/watchtower:armhf-latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped
    network_mode: host
