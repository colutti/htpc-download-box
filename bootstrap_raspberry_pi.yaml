---
- name: Bootstrap Servers
  hosts: pis
  remote_user: colutti
  gather_facts: false

  tasks:

  - name: Update and upgrade apt packages
    become: true
    ansible.builtin.apt:
      upgrade: true
      update_cache: true
      cache_valid_time: 86400

  - name: Install aptitude
    become: true
    ansible.builtin.apt:
      name: aptitude
      state: present
      update_cache: true

  - name: Install required system packages
    become: true
    ansible.builtin.apt:
      pkg:
        - git
        - apt-transport-https
        - ca-certificates
        - curl
        - software-properties-common
        - python3-pip
        - virtualenv
        - python3-setuptools
        - docker-compose
      state: present
      update_cache: true
